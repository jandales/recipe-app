import{s as V,u as B,v as N,e as v,w as A,r as I,o,c as a,b as e,t as i,m as t,a as u,l as _,p as k,q as U,h as x,F as g,f as b,_ as j,j as E,g as q,S as z}from"./index.751c8c45.js";import{h as F}from"./handleImage.d1fc1c08.js";const L={class:"w-full flex flex-col md:flex-row mt-4 md:mt-8"},M={class:"max-w-2xl"},T={class:"w-full px-4 md:px-0"},G={class:"w-full mb-4"},H={class:"text-[2rem]"},J={class:"flex items-center py-4"},K=["src"],O={class:"flex w-full"},P={class:"ml-2"},Q={class:"block text-sm"},W=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),X=[W],Y={key:1,class:"ml-auto"},Z=k("Edit "),ee={class:"w-full mb-4"},se=["src"],te=["src"],le={class:"w-full mb-4"},oe=e("h1",{class:"text-[2rem] mb-2"},"Ingredients",-1),ae={class:"flex items-center gap-2 mb-2"},ie=e("span",{class:"flex items-center justify-center text-sm w-2 h-2 rounded-full bg-sky-500 text-white"},null,-1),ne={class:"w-full mb-4"},ce=e("h1",{class:"text-[2rem] mb-2"},"Instructions",-1),re={class:"mb-2"},de={class:"block mb-2 font-semibold text-sky-500"},ue={class:"text-gray-700"},_e=e("div",{class:"hidden w-full max-w-xs ml-10 mt-26 lg:block"},null,-1),me={__name:"Detail",async setup(h){let r,m;const y=V(),n=B(),p=N(),S=async()=>{try{await n.dispatch("getRecipe",y.params.id)}catch(l){console.log(l)}finally{}},R=async()=>{try{await n.dispatch("destroyRecipe",s.value._id),p.push({name:"home"})}catch(l){console.log(l)}},$=async()=>{try{await n.dispatch("saveRecipe",s.value._id),console.log(isSaved.value)}catch(l){l.response.status==401&&p.push({name:"login"})}},f=v(()=>n.getters.authUser),s=v(()=>{let l=n.getters.recipe;return l.isSaved=l.saved.includes(n.getters.authUser._id),l.user.image=F(l.user),l}),C=v(()=>f.value._id==s.value.user._id);return[r,m]=A(()=>S()),await r,m(),(l,d)=>{const w=I("router-link");return o(),a("div",L,[e("div",M,[e("div",T,[e("div",G,[e("h1",H,i(t(s).name),1),e("div",J,[e("img",{src:t(s).user.image,class:"rounded-full h-12 w-12 border",alt:"Avatar"},null,8,K),e("div",O,[e("div",P,[u(w,{to:{name:"user",params:{id:t(s).user._id}},class:"block hover:underline text-sm font-medium text-sky-500"},{default:_(()=>[k(i(t(s).user.name),1)]),_:1},8,["to"]),e("span",Q,i(t(s).createdAt),1)]),t(f)._id!=t(s).user._id?(o(),a("span",{key:0,onClick:d[0]||(d[0]=c=>$()),class:U(["ml-auto hover:text-sky-500",{"text-sky-500":t(s).isSaved}])},X,2)):x("",!0),t(C)?(o(),a("div",Y,[u(w,{to:{name:"edit",params:{id:t(s)._id}},class:"underline cursor-pointer hover:text-sky-500"},{default:_(()=>[Z]),_:1},8,["to"]),e("span",{onClick:d[1]||(d[1]=c=>R()),class:"underline ml-2 cursor-pointer hover:text-rose-500"},"Delete")])):x("",!0)])]),e("p",null,i(t(s).description),1)]),e("div",ee,[t(s).image?(o(),a("img",{key:0,src:l.$baseUrl+t(s).image,class:"w-full h-full",alt:"img"},null,8,se)):(o(),a("img",{key:1,src:l.$defaultRecipeImage,class:"w-full h-full"},null,8,te))]),e("div",le,[oe,e("ul",null,[(o(!0),a(g,null,b(t(s).ingredients,c=>(o(),a("li",ae,[ie,e("label",null,i(c),1)]))),256))])]),e("div",ne,[ce,e("ul",null,[(o(!0),a(g,null,b(t(s).instructions,(c,D)=>(o(),a("li",re,[e("label",de," Step "+i(D+1),1),e("p",ue,i(c),1)]))),256))])])])]),_e])}}},ve={},he={class:"w-full flex flex-col md:flex-row mt-4 md:mt-8"},pe=E('<div class="w-[42rem] max-w-2xl"><div class="w-full px-4 md:px-0"><div class="w-full mb-4"><div class="w-full py-6 bg-skeleton"></div><div class="flex items-center py-4"><div class="rounded-full h-12 w-12 border bg-skeleton" alt="Avatar"></div><div class="flex w-full"><div class="ml-2"><div class="block w-36 bg-skeleton py-2 hover:underline text-sm font-medium text-sky-500 mb-2"></div><span class="block w-36 bg-skeleton py-2"></span></div></div></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div></div><div class="w-full mb-4"><div class="aspect-square bg-skeleton w-full h-full" alt="img"></div></div></div></div>',1),fe=[pe];function we(h,r){return o(),a("div",he,fe)}var xe=j(ve,[["render",we]]);const ke={__name:"Detail",setup(h){return(r,m)=>(o(),q(z,null,{default:_(()=>[u(me)]),fallback:_(()=>[u(xe)]),_:1}))}};export{ke as default};
