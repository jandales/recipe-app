import{u as A,v as R,d as u,x as K,e as L,o,c as n,b as e,y as w,z as h,A as f,F as m,f as p,q as E,B as C,C as D,t as r,h as v}from"./index.751c8c45.js";import{f as N,a as g}from"./array.f93e9ab1.js";const P={class:"wrapper min-h-screen gap-8 my-8 md:my-16"},O={class:"w-full mx-auto px-6 h-full text-gray-800"},T={class:"flex xl:justify-center justify-center items-center flex-wrap h-full g-6"},$={class:"w-full mb-8 md:mb-0"},q=e("h1",{class:"block mb-8 text-[1.5rem]"},"Create Recipe",-1),G=["onSubmit"],H={class:"flex flex-col gap-4 md:flex-row md:gap-8 border bg-white rounded-md shadow-lg p-4 mb-8"},J={class:"w-full"},Q={class:"mb-3"},W=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Name",-1),X={key:0,class:"block text-rose-500 capitalize mt-2"},Y={class:"mb-3"},Z=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Description",-1),ee={key:0,class:"block text-rose-500 capitalize mt-2"},te=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-4 text-gray-700"},"Image",-1),se={class:"relative w-full md:w-[200px] bg-gradient-to-r from-purple-500 to-pink-500 h-[200px] mb-4"},oe=e("img",{id:"recipe-image",class:"w-full h-full",alt:"recipe-image"},null,-1),ne=[oe],le={for:"dropzone-file",class:"dropzone-file-wrapper absolute bottom-2 right-2 p-2 bg-white rounded-full"},ie=e("span",{class:"bg-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-sky-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})])],-1),re={class:"flex flex-col"},ae={id:"ingredient-wrapper",class:"border rounded-md bg-white shadow-lg p-4 mb-8"},de=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-4 text-gray-700"},"Ingredients",-1),ce={class:"input-field !flex !items-center !justify-between !mb-4"},ue={class:"flex items-center"},me={class:"flex items-center justify-center text-sm mr-4 w-6 h-6 rounded-full bg-sky-500 text-white"},pe={href:""},he=["onClick"],_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),fe=[_e],ve={class:"flex items-center gap-4 mb-4"},ge=["onKeydown"],be={key:0,class:"block text-rose-500 capitalize mt-2"},xe={id:"instruction-wrapper",class:"border rounded-md bg-white shadow-lg p-4 mb-8"},we=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Instructions",-1),ye={class:"input-field !mb-4"},ke={class:"flex justify-between items-center mb-1"},Ce={class:"inline-block py-1 text-sky-500 font-semibold"},Ie=["onClick"],ze=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Fe=[ze],Se={class:"flex items-center gap-4 mb-4"},Me=["onKeydown"],Ve={key:0,class:"block text-rose-500 capitalize mt-2"},je={class:"mb-8 border rounded-md bg-white shadow-lg p-4"},Be=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Status",-1),Ue=e("option",{value:"private"},"Private",-1),Ae=e("option",{value:"public"},"Public",-1),Re=[Ue,Ae],Ke={class:"mb-8"},Le={type:"submit",class:"btn !w-full md:!w-auto"},Ee={key:0,class:"spinner-border animate-spin inline-block w-4 h-4 border-4 rounded-full text-green-500",role:"status"},De=e("span",{class:"visually-hidden"},"Loading...",-1),Ne=[De],Pe={key:1,class:"text-white"},qe={__name:"Create",setup(Oe){const y=A(),I=R(),k=u(!1),a=u(),d=u(),c=u([]),b=u(!1),x=u(!1),s=K({name:null,description:null,ingredients:[],instructions:[],image:null,status:"private"}),z=async()=>{c.value=[],b.value=!1,x.value=!0;try{await y.dispatch("storeRecipe",s),b.value=!0}catch(i){i.response.status===400&&(c.value=i.response.data.errors)}finally{x.value=!1}!b.value||I.push({name:"user",params:{id:B.value._id}})},F=async i=>{const l=i.target.files[0],t=await N.fileReaderAsync(l);t&&(k.value=!0,s.image=l),document.getElementById("recipe-image").setAttribute("src",t)},S=()=>{if(!a.value)return;if(g.exist(s.ingredients,a.value))return alert("ingredient already exist");s.ingredients=[...s.ingredients,a.value],a.value=null},M=()=>{if(!d.value)return;if(g.exist(s.instructions,d.value))return alert("instructions already exist");s.instructions=[...s.instructions,d.value],d.value=null},V=i=>{s.ingredients=g.remove(s.ingredients,i)},j=i=>{s.instructions=g.remove(s.instructions,i)},B=L(()=>y.getters.authUser);return(i,l)=>(o(),n("section",P,[e("div",O,[e("div",T,[e("div",$,[q,e("form",{onSubmit:w(z,["prevent"]),method:"POST",enctype:"multipart/form-data"},[e("div",H,[e("div",J,[e("div",Q,[W,h(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>s.name=t),type:"text",name:"name",class:"input-field",id:"exampleFormControlInput1",placeholder:""},null,512),[[f,s.name]]),(o(!0),n(m,null,p(c.value,t=>(o(),n("div",null,[t.param=="name"?(o(),n("small",X,r(t.msg),1)):v("",!0)]))),256))]),e("div",Y,[Z,h(e("textarea",{cols:"3",rows:"3","onUpdate:modelValue":l[1]||(l[1]=t=>s.description=t),name:"description",class:"input-field",id:"exampleFormControlInput1",placeholder:""},`\r
                      `,512),[[f,s.description]]),(o(!0),n(m,null,p(c.value,t=>(o(),n("div",null,[t.param=="description"?(o(),n("small",ee,r(t.msg),1)):v("",!0)]))),256))]),e("div",null,[te,e("div",se,[e("div",{class:E(["relative border w-full h-full",{hidden:k.value==!1}])},ne,2),e("label",le,[ie,e("input",{id:"dropzone-file",onChange:l[2]||(l[2]=t=>F(t)),type:"file",name:"image",class:"hidden"},null,32)])])])])]),e("div",re,[e("div",ae,[de,(o(!0),n(m,null,p(s.ingredients,(t,_)=>(o(),n("div",ce,[e("div",ue,[e("div",me,r(_+1),1),e("label",pe,r(t),1)]),e("span",{onClick:U=>V(t),class:"remove-ingredient group hover:bg-rose-500 rounded-full"},fe,8,he)]))),256)),e("div",ve,[h(e("input",{onKeydown:C(w(S,["prevent"]),["enter"]),type:"text","onUpdate:modelValue":l[3]||(l[3]=t=>a.value=t),name:"ingredients",class:"input-field",id:"exampleFormControlInput1",placeholder:""},null,40,ge),[[f,a.value]])]),(o(!0),n(m,null,p(c.value,t=>(o(),n("div",null,[t.param=="ingredients"?(o(),n("small",be,r(t.msg),1)):v("",!0)]))),256))]),e("div",xe,[we,(o(!0),n(m,null,p(s.instructions,(t,_)=>(o(),n("div",ye,[e("div",ke,[e("span",Ce," Step "+r(_+1),1),e("span",{onClick:U=>j(t),class:"group hover:bg-rose-500 rounded-full"},Fe,8,Ie)]),e("p",null,r(t),1)]))),256)),e("div",Se,[h(e("textarea",{onKeydown:C(w(M,["prevent"]),["enter"]),"onUpdate:modelValue":l[4]||(l[4]=t=>d.value=t),cols:"3",rows:"3",name:"instructions",class:"input-field text-left",placeholder:""},`\r
                    `,40,Me),[[f,d.value]])]),(o(!0),n(m,null,p(c.value,t=>(o(),n("div",null,[t.param=="instructions"?(o(),n("small",Ve,r(t.msg),1)):v("",!0)]))),256))])]),e("div",je,[Be,h(e("select",{"onUpdate:modelValue":l[5]||(l[5]=t=>s.status=t),name:"status",class:"input-field"},Re,512),[[D,s.status]])]),e("div",Ke,[e("button",Le,[x.value?(o(),n("div",Ee,Ne)):(o(),n("label",Pe,"Save"))])])],40,G)])])])]))}};export{qe as default};
