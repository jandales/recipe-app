import{_ as C}from"./Observer.2148c0c6.js";import{o as s,c as t,F as m,d as y,e as L,f as n,r as V,b as l,u as b,a as f,w as g,g as _,t as k,n as N,h as $,i as j,j as x,k as B,l as w}from"./index.d4576f62.js";import{h as A}from"./handleImage.c5dff1ba.js";const M={class:"flex flex-col md:flex-row flex-wrap w-full gap-4 md:gap-8"},F=L('<div class="w-full flex items-center px-4 py-2"><div class="rounded-full w-8 h-8 bg-skeleton" alt="Avatar"></div><div class="ml-2 w-32 p-3 bg-skeleton"></div><div class="w-4 h-4 bg-skeleton ml-auto"></div></div><div class="aspect-video bg-skeleton"></div><div class="w-full px-4 py-2"><div class="w-3/4 py-2 bg-skeleton"></div></div>',3),H=[F],z={__name:"RecipeSkeleton",props:{count:0},setup(e){return(a,r)=>(s(),t("div",M,[(s(!0),t(m,null,y(e.count,i=>(s(),t("div",{key:i,class:"recipe-item"},H))),128))]))}},I={class:"w-full flex items-center px-4 py-3"},O=["src"],T=["src"],D=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),E=[D],q={class:"aspect-video"},G=["src"],J=["src"],K={class:"flex items-center px-4 py-2"},P={__name:"Recipe",props:{recipe:Object,authUser:Object},emits:["handleSaveRecipe"],setup(e,{emit:a}){const r=e,i=n(null),u=()=>{a("handleSaveRecipe",r.recipe._id)};return(d,o)=>{const p=V("router-link");return s(),t("div",{ref_key:"item",ref:i,class:"recipe-item"},[l("div",I,[e.recipe.user.image?(s(),t("img",{key:0,src:b(A)(e.recipe.user),class:"rounded-full w-6 h-6 border",alt:"Avatar"},null,8,O)):(s(),t("img",{key:1,src:d.$defaultAvatar,class:"rounded-full w-g h-g border",alt:"Avatar"},null,8,T)),f(p,{to:{name:"user",params:{id:e.recipe.user._id},force:!0},class:"ml-2 text-sm font-semibold text-gray-600 hover:underline"},{default:g(()=>[_(k(e.recipe.user.name),1)]),_:1},8,["to"]),e.authUser._id!=e.recipe.user._id?(s(),t("span",{key:2,onClick:o[0]||(o[0]=h=>u()),class:N(["ml-auto hover:text-sky-500",{"text-sky-500":e.recipe.isSaved}])},E,2)):$("",!0)]),l("div",q,[e.recipe.image?(s(),t("img",{key:0,class:"aspect-video",src:d.$baseUrl+e.recipe.image,alt:"recipe-image"},null,8,G)):(s(),t("img",{key:1,class:"aspect-video",src:d.$defaultRecipeImage,alt:"recipe-image"},null,8,J))]),l("div",K,[f(p,{to:{name:"recipe",params:{id:e.recipe._id}},class:"block text-sm tracking-wider text-gray-700 font-semibold mb-2 hover:text-sky-500"},{default:g(()=>[_(k(e.recipe.name),1)]),_:1},8,["to"])])],512)}}},Q={ref:"recipeComponent",class:"relative flex flex-col lg:flex-row w-full"},W={class:"mt-8"},X={key:1,class:"wrapper-1 flex flex-col md:flex-row flex-wrap w-full gap-4 md:gap-8"},Y={key:0,class:"flex flex-col items-center justify-center"},Z=l("div",{class:"mt-8 spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-gray-300",role:"status"},[l("span",{class:"visually-hidden"},"Loading...")],-1),ee=[Z],re={__name:"Home",setup(e){const a=j(),r=n([]),i=n(!1),u=n(0),d=n(3),o=n(!1),p=async()=>{try{i.value=!0,await a.dispatch("getRecipes"),r.value=[...r.value,...v.value]}catch(c){console.log(c)}finally{i.value=!1}},h=async c=>{a.dispatch("saveRecipe",c)},R=x(()=>a.getters.authUser);let v=x(()=>a.getters.recipes.map(c=>(c.isSaved=c.saved.includes(a.getters.authUser._id),c)));const S=async()=>{u.value+=d.value,!o.value&&(await a.dispatch("getRecipes",u.value),r.value=[...r.value,...v.value],o.value=v.value.length==0)};return B(p()),(c,se)=>(s(),t(m,null,[l("div",Q,[l("div",W,[i.value?(s(),w(z,{key:0,count:6})):(s(),t("div",X,[(s(!0),t(m,null,y(r.value,U=>(s(),w(P,{recipe:U,authUser:b(R),onHandleSaveRecipe:h},null,8,["recipe","authUser"]))),256)),f(C,{onHandleLoadMoreRecipe:S})]))])],512),o.value?$("",!0):(s(),t("div",Y,ee))],64))}};export{re as default};
