import{p as S,i as $,q as A,f as I,j as d,k as N,r as f,o as l,l as U,c as o,b as e,u as s,t as n,a as g,w as v,n as E,h as u,F as x,d as y,g as w}from"./index.d4576f62.js";import{h as k}from"./handleImage.c5dff1ba.js";const z={key:1,class:"w-full flex flex-col md:flex-row md:mt-8"},F={class:"max-w-2xl"},M={key:0,class:"w-full px-4 md:px-0"},P={class:"w-full mb-4"},q={class:"text-[2rem]"},T={class:"flex items-center py-4"},G=["src"],H=["src"],J={class:"flex w-full"},K={class:"ml-2"},O={class:"block text-sm"},Q=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1),W=[Q],X={key:1,class:"ml-auto"},Y=w("Edit "),Z={class:"w-full mb-4"},ee=["src"],se=["src"],te={class:"w-full mb-4"},le=e("h1",{class:"text-[2rem] mb-2"},"Ingredients",-1),oe={class:"flex items-center gap-2 mb-2"},ae=e("span",{class:"flex items-center justify-center text-sm w-2 h-2 rounded-full bg-sky-500 text-white"},null,-1),ne={class:"w-full mb-4"},re=e("h1",{class:"text-[2rem] mb-2"},"Instructions",-1),ce={class:"mb-2"},ie={class:"block mb-2 font-semibold text-sky-500"},de={class:"text-gray-700"},ue={class:"hidden w-full max-w-xs ml-10 mt-26 lg:block"},_e={class:"px-6 py-6 mx-2 mt-10 mb-6 text-center bg-white border rounded-lg lg:mt-0 xl:px-10"},me={class:"space-y-4 xl:space-y-6"},he=["src"],pe={class:"space-y-2"},fe={class:"flex justify-center items-center flex-col space-y-3 text-lg font-medium leading-6"},ge=e("div",{class:"flex justify-center mt-5 space-x-5"},null,-1),ke={__name:"Detail",setup(ve){const b=S(),r=$(),m=A(),_=I(!1),R=async()=>{try{_.value=!0,await r.dispatch("getRecipe",b.params.id)}catch(a){console.log(a)}finally{_.value=!1}},C=async()=>{try{await r.dispatch("destroyRecipe",t.value._id),m.push({name:"home"})}catch(a){console.log(a)}},V=async()=>{try{await r.dispatch("saveRecipe",t.value._id)}catch(a){a.response.status==401&&m.push({name:"login"})}},h=d(()=>r.getters.authUser),t=d(()=>r.getters.recipe),j=d(()=>r.getters.recipe.saved.includes(r.getters.authUser._id)),B=d(()=>h.value._id==t.value.user._id);return N(R()),(a,i)=>{const D=f("PageLoading"),p=f("router-link");return _.value?(l(),U(D,{key:0})):(l(),o("div",z,[e("div",F,[s(t)?(l(),o("div",M,[e("div",P,[e("h1",q,n(s(t).name),1),e("div",T,[s(t).user.image?(l(),o("img",{key:0,src:s(k)(s(t).user),class:"rounded-full h-12 w-12 border",alt:"Avatar"},null,8,G)):(l(),o("img",{key:1,src:a.$defaultAvatar,class:"rounded-full h-12 w-12 border",alt:"Avatar"},null,8,H)),e("div",J,[e("div",K,[g(p,{to:{name:"user",params:{id:s(t).user._id}},class:"block hover:underline text-sm font-medium text-sky-500"},{default:v(()=>[w(n(s(t).user.name),1)]),_:1},8,["to"]),e("span",O,n(s(t).createdAt),1)]),s(h)._id!=s(t).user._id?(l(),o("span",{key:0,onClick:i[0]||(i[0]=c=>V()),class:"ml-auto hover:text-sky-500"},[(l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:E(["w-6 h-6",{"text-sky-500":s(j)}])},W,2))])):u("",!0),s(B)?(l(),o("div",X,[g(p,{to:{name:"edit",params:{id:s(t)._id}},class:"underline cursor-pointer hover:text-sky-500"},{default:v(()=>[Y]),_:1},8,["to"]),e("span",{onClick:i[1]||(i[1]=c=>C()),class:"underline ml-2 cursor-pointer hover:text-rose-500"},"Delete")])):u("",!0)])]),e("p",null,n(s(t).description),1)]),e("div",Z,[s(t).image?(l(),o("img",{key:0,src:a.$baseUrl+s(t).image,class:"w-full h-full",alt:"img"},null,8,ee)):(l(),o("img",{key:1,src:a.$defaultRecipeImage,class:"w-full h-full"},null,8,se))]),e("div",te,[le,e("ul",null,[(l(!0),o(x,null,y(s(t).ingredients,c=>(l(),o("li",oe,[ae,e("label",null,n(c),1)]))),256))])]),e("div",ne,[re,e("ul",null,[(l(!0),o(x,null,y(s(t).instructions,(c,L)=>(l(),o("li",ce,[e("label",ie," Step "+n(L+1),1),e("p",de,n(c),1)]))),256))])])])):u("",!0)]),e("div",ue,[e("div",_e,[e("div",me,[s(t).user.image?(l(),o("img",{key:0,class:"mx-auto rounded-full border h-36 w-36",src:s(k)(s(t).user),alt:"author avatar"},null,8,he)):u("",!0),e("div",pe,[e("div",fe,[e("h3",null,n(s(t).user.name),1),ge])])])])])]))}}};export{ke as default};
