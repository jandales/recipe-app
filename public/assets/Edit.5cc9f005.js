import{u as L,i as A,r as a,l as E,o as P,b as l,e as K,c as i,k,f as e,m as N,p as m,v as f,F as _,d as g,n as T,q as M,s as D,t as u,h as $}from"./index.8f28c3ee.js";import{f as O}from"./fileReader.e9c4bdf8.js";import{P as q}from"./PageLoading.261865ce.js";const G={key:1,class:"wrapper min-h-screen gap-8 my-8 md:my-16"},H={key:0,class:"bg-green-100 rounded-lg py-5 px-6 text-base mb-4 text-green-700 inline-flex items-center w-full",role:"alert"},J=e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"w-4 h-4 mr-2 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"})],-1),Q=$(" Successfully Updated "),W=[J,Q],X={class:"w-full mx-auto px-6 h-full text-gray-800"},Y={class:"flex xl:justify-center justify-center items-center flex-wrap h-full g-6"},Z={class:"w-full mb-8 md:mb-0"},ee=e("h1",{class:"block mb-8 text-[1.5rem]"},"Edit Recipe",-1),te=["onSubmit"],se={class:"flex flex-col gap-4 md:flex-row md:gap-8 border bg-white rounded-md shadow-lg p-4 mb-8"},oe={class:"w-full"},ne={class:"mb-3"},le=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Name",-1),ie={key:0,class:"block text-rose-500 capitalize mt-2"},re={class:"mb-3"},ae=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Description",-1),de={key:0,class:"block text-rose-500 capitalize mt-2"},ce=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-4 text-gray-700"},"Image",-1),ue={class:"relative w-full md:w-[200px] bg-gradient-to-r from-purple-500 to-pink-500 h-[200px] mb-4"},me=["src"],pe={for:"dropzone-file",class:"dropzone-file-wrapper absolute bottom-2 right-2 p-2 bg-white rounded-full"},he=e("span",{class:"bg-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-sky-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})])],-1),fe={class:"flex flex-col"},_e={id:"ingredient-wrapper",class:"border rounded-md bg-white shadow-lg p-4 mb-8"},ge=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Ingredients",-1),ve={class:"flex items-center gap-4 mb-4"},be=["onKeydown"],xe={class:"input-field !flex !items-center !justify-between !mb-2"},we={class:"flex items-center"},ye={class:"flex items-center justify-center text-sm mr-4 w-6 h-6 rounded-full bg-sky-500 text-white"},ke={href:""},Ce=["onClick"],Ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Fe=[Ie],Me={id:"instruction-wrapper",class:"border rounded-md bg-white shadow-lg p-4 mb-8"},ze=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Instructions",-1),Re={class:"flex items-center gap-4 mb-4"},Se=["onKeydown"],Ve={class:"input-field !flex !items-center !justify-between !mb-2"},je={class:"flex items-center"},Ue={class:"flex items-center justify-center text-sm mr-4 w-6 h-6 rounded-full bg-sky-500 text-white"},Be={href:""},Le=["onClick"],Ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Ee=[Ae],Pe={class:"mb-8"},Ke=e("label",{for:"exampleFormControlInput1",class:"form-label inline-block mb-2 text-gray-700"},"Status",-1),Ne=e("option",{value:"private"},"Private",-1),Te=e("option",{value:"public"},"Public",-1),De=[Ne,Te],$e={class:"mb-8"},Oe={type:"submit",class:"btn !w-full md:!w-auto",value:"Submit"},qe={key:0,class:"spinner-border animate-spin inline-block w-4 h-4 border-4 rounded-full text-green-500",role:"status"},Ge=e("span",{class:"visually-hidden"},"Loading...",-1),He=[Ge],Je={key:1},et={__name:"Edit",setup(Qe){const v=L(),C=A(),b=a(!1),d=a(),c=a(),p=a([]),x=a(!1),h=a(!1),w=a(!1),s=E({name:null,description:null,ingredients:Array(),instructions:Array(),image:null,status:null});P((async()=>{try{w.value=!0,await v.dispatch("getRecipe",C.params.id);const{name:n,description:o,ingredients:t,instructions:r,image:y,status:B}=v.getters.recipe;s.name=n,s.description=o,s.ingredients=t,s.instructions=r,s.status=B,s.image=y,s.image&&(b.value=!0)}catch(n){console.log(n)}finally{w.value=!1}})());const z=async()=>{p.value=[],x.value=!1,h.value=!0;const n={id:C.params.id,form:s};try{await v.dispatch("updateRecipe",n),h.value=!1,window.scrollTo(0,0),x.value=!0}catch(o){p.value=o.response.data.errors}finally{h.value=!1}},R=async n=>{const o=n.target.files[0],t=await O.fileReaderAsync(o);t&&(b.value=!0,s.image=o),document.getElementById("recipe-image").setAttribute("src",t)},S=()=>{if(!d.value)return console.log("empty");if(I(s.ingredients,d.value))return alert("ingredient already exist");s.ingredients=[...s.ingredients,d.value],d.value=null},V=()=>{if(!c.value)return console.log("empty");if(I(s.instructions,c.value))return alert("instructions already exist");s.instructions=[...s.instructions,c.value],c.value=null},I=(n,o)=>{let t=!1;for(let r=0;r<n.length;r++)if(n[r]==o)return t=!0;return t},j=n=>{s.ingredients=F(s.ingredients,n)},U=n=>{s.instructions=F(s.instructions,n)};function F(n,o){return n.filter(function(t){return t!=o})}return(n,o)=>w.value?(l(),K(q,{key:0})):(l(),i("section",G,[x.value?(l(),i("div",H,W)):k("",!0),e("div",X,[e("div",Y,[e("div",Z,[ee,e("form",{onSubmit:N(z,["prevent"]),method:"POST",enctype:"multipart/form-data"},[e("div",se,[e("div",oe,[e("div",ne,[le,m(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.name=t),type:"text",name:"name",class:"input-field",id:"exampleFormControlInput1",placeholder:""},null,512),[[f,s.name]]),(l(!0),i(_,null,g(p.value,t=>(l(),i("div",null,[t.param=="name"?(l(),i("small",ie,u(t.msg),1)):k("",!0)]))),256))]),e("div",re,[ae,m(e("textarea",{cols:"3",rows:"3","onUpdate:modelValue":o[1]||(o[1]=t=>s.description=t),name:"description",class:"input-field",id:"exampleFormControlInput1",placeholder:""},`\r
                        `,512),[[f,s.description]]),(l(!0),i(_,null,g(p.value,t=>(l(),i("div",null,[t.param=="description"?(l(),i("small",de,u(t.msg),1)):k("",!0)]))),256))]),e("div",null,[ce,e("div",ue,[e("div",{class:T(["relative border w-full h-full",{hidden:b.value==!1}])},[e("img",{id:"recipe-image",src:n.$baseURL+s.image,class:"w-full h-full",alt:"recipe-image"},null,8,me)],2),e("label",pe,[he,e("input",{id:"dropzone-file",onChange:o[2]||(o[2]=t=>R(t)),type:"file",name:"image",class:"hidden"},null,32)])])])])]),e("div",fe,[e("div",_e,[ge,e("div",ve,[m(e("input",{onKeydown:M(S,["enter"]),type:"text","onUpdate:modelValue":o[3]||(o[3]=t=>d.value=t),name:"ingredients",class:"input-field",id:"exampleFormControlInput1",placeholder:""},null,40,be),[[f,d.value]])]),(l(!0),i(_,null,g(s.ingredients,(t,r)=>(l(),i("div",xe,[e("div",we,[e("div",ye,u(r+1),1),e("label",ke,u(t),1)]),e("span",{onClick:y=>j(t),class:"remove-ingredient group hover:bg-rose-500 rounded-full"},Fe,8,Ce)]))),256))]),e("div",Me,[ze,e("div",Re,[m(e("textarea",{onKeydown:M(V,["enter"]),"onUpdate:modelValue":o[4]||(o[4]=t=>c.value=t),cols:"3",rows:"3",name:"instructions",class:"input-field text-left",placeholder:""},`\r
                      `,40,Se),[[f,c.value]])]),(l(!0),i(_,null,g(s.instructions,(t,r)=>(l(),i("div",Ve,[e("div",je,[e("div",Ue,u(r+1),1),e("label",Be,u(t),1)]),e("span",{onClick:y=>U(t),class:"group hover:bg-rose-500 rounded-full"},Ee,8,Le)]))),256))])]),e("div",Pe,[Ke,m(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>s.status=t),name:"status",class:"input-field"},De,512),[[D,s.status]])]),e("div",$e,[e("button",Oe,[h.value?(l(),i("div",qe,He)):(l(),i("label",Je,"Update"))])])],40,te)])])])]))}};export{et as default};
