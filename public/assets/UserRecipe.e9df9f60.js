import{r as I,o as e,c as t,b as s,t as h,k as p,w as N,h as k,g as y,_ as P,e as D,a as w,F as b,u as F,m as O,f as d,j as U,i as v,B as G,l as n,n as B,d as M}from"./index.db8df400.js";import{_ as j}from"./Observer.79986f65.js";const J={class:"w-full flex md:items-center md:justify-center px-3 md:px-0 mx-auto mb-4"},K=["src"],Q=["src"],W={class:"w-full ml-4 md:ml-16"},X={class:"w-full flex flex-col md:flex-row md:items-center mb-3"},Y={for:"",class:"block text-[1.5rem] mb-2 md:mb-0"},Z=y("Edit Profile"),ee={class:"flex gap-8 mt-4"},se={class:"text-base"},te={class:"font-semibold"},ae=y(" recipes"),oe={key:0,class:"text-base"},re={class:"font-semibold"},le=y(" saved recipes"),ce={__name:"BigAvatar",props:{user:Object,isAuth:Boolean},setup(a){return(o,r)=>{const l=I("router-link");return e(),t("div",J,[a.user.image?(e(),t("img",{key:0,src:a.user.image,class:"rounded-full w-24 h-24 md:w-40 md:h-40 border-4 border-sky-700",alt:"Avatar"},null,8,K)):(e(),t("img",{key:1,src:o.$defaultAvatar,class:"rounded-full w-24 h-24 md:w-40 md:h-40 border-4 border-sky-700",alt:"Avatar"},null,8,Q)),s("div",W,[s("div",X,[s("label",Y,h(a.user.name),1)]),a.isAuth?(e(),p(l,{key:0,to:{name:"account.edit",params:{id:a.user._id}},class:"px-3 py-2 text-center text-sm bg-white rounded-md border hover:border-blue-500 hover:text-white hover:bg-blue-500"},{default:N(()=>[Z]),_:1},8,["to"])):k("",!0),s("ul",ee,[s("li",se,[s("span",te,h(a.user.recipes_count),1),ae]),a.isAuth?(e(),t("li",oe,[s("span",re,h(a.user.recipes_saved_count),1),le])):k("",!0)])])])}}},ie={},de={class:"w-full flex md:items-center px-3 md:px-0 mx-auto mb-4"},ne=D('<div class="rounded-full w-24 h-24 md:w-40 md:h-40 bg-gray-200"></div><div class="min-w-[300px] ml-4 md:ml-16"><div class="block px-8 py-4 bg-gray-200 mb-2 rounded-sm"></div><div class="block px-10 py-4 text-center text-sm bg-gray-200 rounded-sm mb-2"></div><div class="w-[100px] px-6 py-3 text-center text-sm bg-gray-200 rounded-sm"></div></div>',2),ue=[ne];function me(a,o){return e(),t("div",de,ue)}var _e=P(ie,[["render",me]]);const ve={},pe={class:"relative w-1/2 md:w-[calc(((100%_+_1rem)_/_3)_-_1rem)] md:rounded-lg md:shadow-lg md:overflow-hidden md:border bg-white"},he=s("div",{class:"aspect-square bg-skeleton",alt:""},null,-1),fe=s("div",{class:"px-4 py-2"},[s("div",{class:"w-full py-2 bg-skeleton"})],-1),ge=[he,fe];function xe(a,o){return e(),t("div",pe,ge)}var we=P(ve,[["render",xe]]);const be=["src"],ke=["src"],ye={class:"px-4 py-2"},H={__name:"Recipe",props:{recipe:Object},setup(a){return(o,r)=>{const l=I("router-link");return e(),t(b,null,[a.recipe.image?(e(),t("img",{key:0,class:"aspect-square",src:a.recipe.image,alt:""},null,8,be)):(e(),t("img",{key:1,class:"aspect-square",src:o.$defaultRecipeImage,alt:""},null,8,ke)),s("div",ye,[w(l,{to:{name:"recipe",params:{id:a.recipe._id}},class:"text-gray-900 block text-sm font-semibold"},{default:N(()=>[y(h(a.recipe.name),1)]),_:1},8,["to"])])],64)}}},$e={class:"w-full"},Re={key:0,class:"w-[900px] mx-auto mt-16"},Se={class:"block p-4 text-sm"},Ae={key:2,class:"w-full flex gap-8 mb-8 p-4 border-b"},Ce=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})],-1),Be=s("label",{class:"text-sm font-semibold text-gray-500"},"RECIPES",-1),Me=[Ce,Be],Ve=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 group-hover:cursor-pointer"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),Ee=s("label",{class:"text-sm font-semibold text-gray-500 group-hover:cursor-pointer"},"SAVED",-1),Le=[Ve,Ee],ze={key:3,class:"w-full flex r gap-8 mb-8 p-4 border-b"},Ue=s("label",{class:"text-sm font-semibold text-gray-500"},"RECIPES",-1),je=[Ue],He={key:5,class:"w-full"},Ie={class:"relative w-1/2 md:w-[calc(((100%_+_1rem)_/_3)_-_1rem)] md:rounded-lg md:shadow-lg md:overflow-hidden md:border bg-white"},Ne={class:"relative w-1/2 md:w-[calc(((100%_+_1rem)_/_3)_-_1rem)] md:rounded-lg md:shadow-lg md:overflow-hidden md:border bg-white"},Pe={key:6,class:"w-full flex items-center justify-center mt-4"},Te=s("div",{class:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-gray-300",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),qe=[Te],Oe={__name:"UserRecipe",setup(a){const o=F(),r=O();d(!1);const l=d(!1),$=d(!1),T=d(3),V=d(0),u=d([]),m=d([]),f=d(!0),E=async()=>{try{l.value=!0,await o.dispatch("getUserInfo",r.params.id)}catch(c){console.log(c)}finally{l.value=!1}_&&R()},R=async(c=0)=>{await o.dispatch("getUserRecipes",{id:r.params.id,page:c}),u.value=[...u.value,...A.value],L(!1)},q=async(c=0)=>{await o.dispatch("getSavedRecipes",{id:r.params.id,page:c}),m.value=[...m.value,...C.value],L(!0)},L=c=>{$.value=c},S=async()=>{if(V.value+=T.value,!!f.value){if($.value){await o.dispatch("getSavedRecipes",{id:r.params.id,page}),m.value=[...m.value,...C.value],f.value=C.value.length!=0;return}await o.dispatch("getUserRecipes",{id:r.params.id,page:V.value}),u.value=[...u.value,...A.value],f.value=A.value.length!=0}};U(E()),U(()=>{window.addEventListener("scroll",S)});const g=v(()=>o.getters.authUser),_=v(()=>o.getters.user),A=v(()=>o.getters.recipes),C=v(()=>o.getters.savedRecipes),z=v(()=>g.value._id==_.value._id);return G(()=>{r.params.id,E()}),(c,x)=>(e(),t("div",$e,[n(_)?(e(),t("div",Re,[l.value?(e(),p(_e,{key:0})):(e(),p(ce,{key:1,user:n(_),isAuth:n(z)},null,8,["user","isAuth"])),s("p",Se,h(n(_).bio),1),n(z)?(e(),t("div",Ae,[s("div",{onClick:x[0]||(x[0]=i=>R()),class:"flex items-center gap-2 cursor-pointer"},Me),s("div",{onClick:x[1]||(x[1]=i=>q()),class:"flex items-center gap-2 group cursor-pointer"},Le)])):(e(),t("div",ze,[s("div",{onClick:R,class:"flex gap-2 cursor-pointer"},je)])),l.value?(e(),t("div",{key:4,class:B(["w-full md:mx-auto flex flex-wrap md:gap-4",{"mt-16":!n(g)}])},[(e(),t(b,null,M(3,i=>w(we)),64))],2)):(e(),t("div",He,[$.value?(e(),t("div",{key:1,class:B(["w-full md:mx-auto flex flex-wrap md:gap-4",{"mt-16":!n(g)}])},[(e(!0),t(b,null,M(m.value,i=>(e(),t("div",Ne,[(e(),p(H,{recipe:i,key:i._id},null,8,["recipe"])),w(j,{onHandleLoadMoreRecipe:S})]))),256))],2)):(e(),t("div",{key:0,class:B(["w-full md:mx-auto flex flex-wrap md:gap-4",{"mt-16":!n(g)}])},[(e(!0),t(b,null,M(u.value,i=>(e(),t("div",Ie,[(e(),p(H,{recipe:i,key:i._id},null,8,["recipe"])),w(j,{onHandleLoadMoreRecipe:S})]))),256))],2))])),f.value?(e(),t("div",Pe,qe)):k("",!0)])):k("",!0)]))}};export{Oe as default};
