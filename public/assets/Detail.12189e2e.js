import{q as A,u as B,s as N,e as u,w as I,r as U,o as l,c as a,b as e,t as c,m as s,a as _,k as m,n as g,p as j,h as x,F as k,f as b,_ as E,j as q,g as z,S as F}from"./index.16d2990d.js";import{h as L}from"./handleImage.224c27dd.js";const M={class:"w-full flex flex-col md:flex-row mt-4 md:mt-8"},T={class:"max-w-2xl"},G={class:"w-full px-4 md:px-0"},H={class:"w-full mb-4"},J={class:"text-[2rem]"},K={class:"flex items-center py-4"},O=["src"],P=["src"],Q={class:"flex w-full"},W={class:"ml-2"},X={class:"block text-sm"},Y=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1),Z=[Y],ee={key:1,class:"ml-auto"},se=g("Edit "),te={class:"w-full mb-4"},le=["src"],ae=["src"],oe={class:"w-full mb-4"},ne=e("h1",{class:"text-[2rem] mb-2"},"Ingredients",-1),ce={class:"flex items-center gap-2 mb-2"},ie=e("span",{class:"flex items-center justify-center text-sm w-2 h-2 rounded-full bg-sky-500 text-white"},null,-1),re={class:"w-full mb-4"},de=e("h1",{class:"text-[2rem] mb-2"},"Instructions",-1),ue={class:"mb-2"},_e={class:"block mb-2 font-semibold text-sky-500"},me={class:"text-gray-700"},he=e("div",{class:"hidden w-full max-w-xs ml-10 mt-26 lg:block"},null,-1),pe={__name:"Detail",async setup(p){let r,h;const y=A(),n=B(),v=N(),$=async()=>{try{await n.dispatch("getRecipe",y.params.id)}catch(o){console.log(o)}finally{}},R=async()=>{try{await n.dispatch("destroyRecipe",t.value._id),v.push({name:"home"})}catch(o){console.log(o)}},S=async()=>{try{await n.dispatch("saveRecipe",t.value._id)}catch(o){o.response.status==401&&v.push({name:"login"})}},f=u(()=>n.getters.authUser),t=u(()=>n.getters.recipe),C=u(()=>n.getters.recipe.saved.includes(n.getters.authUser._id)),D=u(()=>f.value._id==t.value.user._id);return[r,h]=I(()=>$()),await r,h(),(o,d)=>{const w=U("router-link");return l(),a("div",M,[e("div",T,[e("div",G,[e("div",H,[e("h1",J,c(s(t).name),1),e("div",K,[s(t).user.image?(l(),a("img",{key:0,src:s(L)(s(t).user),class:"rounded-full h-12 w-12 border",alt:"Avatar"},null,8,O)):(l(),a("img",{key:1,src:o.$defaultAvatar,class:"rounded-full h-12 w-12 border",alt:"Avatar"},null,8,P)),e("div",Q,[e("div",W,[_(w,{to:{name:"user",params:{id:s(t).user._id}},class:"block hover:underline text-sm font-medium text-sky-500"},{default:m(()=>[g(c(s(t).user.name),1)]),_:1},8,["to"]),e("span",X,c(s(t).createdAt),1)]),s(f)._id!=s(t).user._id?(l(),a("span",{key:0,onClick:d[0]||(d[0]=i=>S()),class:"ml-auto hover:text-sky-500"},[(l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:j(["w-6 h-6",{"text-sky-500":s(C)}])},Z,2))])):x("",!0),s(D)?(l(),a("div",ee,[_(w,{to:{name:"edit",params:{id:s(t)._id}},class:"underline cursor-pointer hover:text-sky-500"},{default:m(()=>[se]),_:1},8,["to"]),e("span",{onClick:d[1]||(d[1]=i=>R()),class:"underline ml-2 cursor-pointer hover:text-rose-500"},"Delete")])):x("",!0)])]),e("p",null,c(s(t).description),1)]),e("div",te,[s(t).image?(l(),a("img",{key:0,src:o.$baseUrl+s(t).image,class:"w-full h-full",alt:"img"},null,8,le)):(l(),a("img",{key:1,src:o.$defaultRecipeImage,class:"w-full h-full"},null,8,ae))]),e("div",oe,[ne,e("ul",null,[(l(!0),a(k,null,b(s(t).ingredients,i=>(l(),a("li",ce,[ie,e("label",null,c(i),1)]))),256))])]),e("div",re,[de,e("ul",null,[(l(!0),a(k,null,b(s(t).instructions,(i,V)=>(l(),a("li",ue,[e("label",_e," Step "+c(V+1),1),e("p",me,c(i),1)]))),256))])])])]),he])}}},ve={},fe={class:"w-full flex flex-col md:flex-row md:mt-8"},we=q('<div class="w-[42rem] max-w-2xl"><div class="w-full px-4 md:px-0"><div class="w-full mb-4"><div class="w-full py-6 bg-skeleton"></div><div class="flex items-center py-4"><div class="rounded-full h-12 w-12 border bg-skeleton" alt="Avatar"></div><div class="flex w-full"><div class="ml-2"><div class="block w-36 bg-skeleton py-2 hover:underline text-sm font-medium text-sky-500 mb-2"></div><span class="block w-36 bg-skeleton py-2"></span></div></div></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div><div class="py-2 bg-skeleton w-full mb-2"></div></div><div class="w-full mb-4"><div class="aspect-square bg-skeleton w-full h-full" alt="img"></div></div></div></div>',1),xe=[we];function ke(p,r){return l(),a("div",fe,xe)}var be=E(ve,[["render",ke]]);const $e={__name:"Detail",setup(p){return(r,h)=>(l(),z(F,null,{default:m(()=>[_(pe)]),fallback:m(()=>[_(be)]),_:1}))}};export{$e as default};
