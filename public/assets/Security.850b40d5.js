import{u as k,d as g,x as C,e as L,o as s,c as t,p as _,t as i,h as d,F as p,f as m,b as e,z as f,A as w,m as x,q as E}from"./index.17f1bc14.js";const D={class:"flex flex-col w-full items-end mb-2 gap-8"},z={key:0,class:"bg-green-100 rounded-lg py-5 px-6 text-base text-green-700 inline-flex items-center w-full",role:"alert"},I=e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"w-4 h-4 mr-2 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"})],-1),P={key:0,class:"bg-red-100 rounded-lg py-5 px-6 text-base text-red-700 inline-flex items-center w-full",role:"alert"},V=e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times-circle",class:"w-4 h-4 mr-2 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"})],-1),B={class:"w-full bg-white p-6 border rounded-md mb-4"},S=e("h1",{class:"text-lg text-gray-500 font-semibold mb-4"},"Change password",-1),U={class:"w-full mb-6"},M=e("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Old Password",-1),N={key:0,class:"block text-rose-500 mt-2"},A={class:"w-full mb-6"},H=e("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"New Password",-1),F={key:0,class:"block text-rose-500 mt-2"},T={class:"w-full mb-6"},q=e("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Confirm Password",-1),O={key:0,class:"block text-rose-500 mt-2"},j={class:"w-full"},G=["disabled"],J={key:0,class:"spinner-border animate-spin inline-block w-4 h-4 border-4 rounded-full text-green-500",role:"status"},K=e("span",{class:"visually-hidden"},"Loading...",-1),Q=[K],R={key:1,class:"text-white"},W={class:"w-full bg-white p-6 border rounded-md"},X=e("h1",{class:"text-lg font-semibold mb-4"},"Delete account",-1),Y={key:0,class:"spinner-border animate-spin inline-block w-4 h-4 border-4 rounded-full text-green-500",role:"status"},Z=e("span",{class:"visually-hidden"},"Loading...",-1),$=[Z],ee={key:1,class:"text-rose-500 group-hover:text-white"},oe={__name:"Security",setup(se){const b=k(),c=g(),a=g([]),u=g(!1),n=C({new_password:null,password_confirmation:null,password:null}),v=async()=>{u.value=!0;try{await b.dispatch("deleteAccount"),location.reload()}catch(r){console.log(r)}finally{u.value=!1}},y=async()=>{a.value=[],c.value=null;try{let r=await b.dispatch("changePassword",n);c.value=r.data.message}catch(r){const l=r.response.data.errors;r.response.status===400&&(a.value=l),r.response.status>400&&(a.value=[...a.value,{message:l}])}},h=L(()=>b.getters.authUser);return(r,l)=>(s(),t("div",D,[c.value?(s(),t("div",z,[I,_(" "+i(c.value),1)])):d("",!0),(s(!0),t(p,null,m(a.value,o=>(s(),t("div",null,[o.message?(s(),t("div",P,[V,_(" "+i(o.message),1)])):d("",!0)]))),256)),e("div",B,[S,e("div",U,[M,f(e("input",{type:"password","onUpdate:modelValue":l[0]||(l[0]=o=>n.password=o),class:"form-control w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"exampleInputEmail2","aria-describedby":"emailHelp"},null,512),[[w,n.password]]),(s(!0),t(p,null,m(a.value,o=>(s(),t("div",null,[o.param=="password"?(s(),t("small",N,i(o.msg),1)):d("",!0)]))),256))]),e("div",A,[H,f(e("input",{type:"password","onUpdate:modelValue":l[1]||(l[1]=o=>n.new_password=o),class:"form-control w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"exampleInputEmail2","aria-describedby":"emailHelp"},null,512),[[w,n.new_password]]),(s(!0),t(p,null,m(a.value,o=>(s(),t("div",null,[o.param=="new_password"?(s(),t("small",F,i(o.msg),1)):d("",!0)]))),256))]),e("div",T,[q,f(e("input",{type:"password","onUpdate:modelValue":l[2]||(l[2]=o=>n.password_confirmation=o),class:"form-control w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"exampleInputEmail2","aria-describedby":"emailHelp"},null,512),[[w,n.password_confirmation]]),(s(!0),t(p,null,m(a.value,o=>(s(),t("div",null,[o.param=="password_confirmation"?(s(),t("small",O,i(o.msg),1)):d("",!0)]))),256))]),e("div",j,[e("button",{onClick:y,type:"submit",name:"submit",value:"Change Password",disabled:x(h).provider,class:E([{"cursor-not-allowed bg-gray-500 hover:bg-gray-500":x(h).provider},"inline-block px-7 py-3 w-full lg:w-auto bg-blue-600 text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"])},[u.value?(s(),t("div",J,Q)):(s(),t("label",R,"Delete"))],10,G)])]),e("div",W,[X,e("button",{onClick:v,type:"submit",name:"submit",value:"Delete",class:"group inline-block px-7 py-3 w-full lg:w-auto border text-sm font-semibold leading-snug uppercase rounded shadow-md border-rose-500 hover:bg-rose-500 hover:text-white hover:shadow-lg focus:bg-rose-500 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"},[u.value?(s(),t("div",Y,$)):(s(),t("label",ee,"Delete"))])])]))}};export{oe as default};
