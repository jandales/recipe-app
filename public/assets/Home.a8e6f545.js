import{u as L,d as i,e as N,w as B,o as s,c as l,b as r,F as p,f as k,g as _,a as v,h as V,i as A,j as F,k as w,S as H}from"./index.16d2990d.js";import{_ as U,S as E}from"./Spinner.dff6be8a.js";import{_ as I}from"./Recipe.233c6e08.js";import"./handleImage.224c27dd.js";const M={class:"flex flex-wrap w-full gap-4 px-4 md:gap-8"},j={__name:"ListRecipe",async setup(u){let c,n;const t=L(),y=A(),d=i([]),m=i(0),o=i(!1),f=i(0),{$perpage:g,$defaultRecipeImage:R,$baseUrl:S}=y.appContext.config.globalProperties,h=async(e=0)=>{try{await t.dispatch("getRecipes",e),d.value=[...d.value,...x.value],f.value=x.value.length}catch(a){console.log(a)}};let x=N(()=>t.getters.recipes.map(e=>{const a=t.getters.authUser._id;return e.isSaved=e.saved.includes(a),e.isAuthUserRecipe=a==e.user._id,e.image?e.image=S+e.image:e.image=R,e}));const $=async e=>{t.dispatch("saveRecipe",e)},b=async()=>{if(f.value<g)return o.value=!1;o.value=!0,m.value+=g,await h(m.value),o.value=!1};return[c,n]=B(()=>h()),await c,n(),(e,a)=>(s(),l(p,null,[r("div",M,[(s(!0),l(p,null,k(d.value,C=>(s(),_(I,{recipe:C,onHandleSaveRecipe:$},null,8,["recipe"]))),256)),v(U,{onHandleLoadMoreRecipe:b})]),o.value?(s(),_(E,{key:0})):V("",!0)],64))}},P={class:"flex flex-wrap w-full gap-4 px-4 md:gap-8"},T=F('<div class="w-full hidden md:flex items-center px-4 py-2"><div class="rounded-full w-8 h-8 bg-skeleton" alt="Avatar"></div><div class="ml-2 w-32 p-3 bg-skeleton"></div><div class="w-4 h-4 bg-skeleton ml-auto"></div></div><div class="aspect-video bg-skeleton"></div><div class="w-full px-4 py-2"><div class="w-3/4 py-2 bg-skeleton"></div></div>',3),q=[T],z={__name:"RecipeSkeleton",props:{count:0},setup(u){return(c,n)=>(s(),l("div",P,[(s(!0),l(p,null,k(u.count,t=>(s(),l("div",{key:t,class:"recipe-item"},q))),128))]))}},D={ref:"recipeComponent",class:"relative flex flex-col lg:flex-row w-full"},G={class:"mt-8"},J={class:"mt-8"},X={__name:"Home",setup(u){return(c,n)=>(s(),_(H,null,{default:w(()=>[r("div",D,[r("div",G,[v(j)])],512)]),fallback:w(()=>[r("div",J,[v(z,{count:3})])]),_:1}))}};export{X as default};
