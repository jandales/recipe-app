import{u as R,d as y,A as T,p as B,e as I,f as V,o as s,c as l,j as k,t as m,k as u,F as p,g,h as b,b as t,s as _,v as x}from"./index.61ce0695.js";const H={key:0,class:"bg-green-100 rounded-lg py-5 px-6 text-base mb-4 text-green-700 inline-flex items-center w-full",role:"alert"},M=t("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"w-4 h-4 mr-2 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[t("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"})],-1),N={key:0,class:"bg-red-100 rounded-lg py-5 px-6 mb-4 text-base text-red-700 inline-flex items-center w-full",role:"alert"},z=t("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times-circle",class:"w-4 h-4 mr-2 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[t("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"})],-1),P={key:1,class:"w-full"},j={class:"flex items-center bg-white p-6 border rounded-md gap-4 mb-8"},D={class:"flex w-auto"},F=["src"],$=["src"],G={class:"w-auto"},Y={for:"",class:"block text-base"},q={key:0,class:"text-gray-500 text-sm"},J={class:"flex flex-col w-full mb-4 gap-8 bg-white p-6 border rounded-md"},K=t("h1",{class:"text-lg text-gray-500 font-semibold"},"Profile",-1),O={class:"w-full"},Q=t("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Name",-1),W={key:0,class:"block text-rose-500 mt-2"},X={class:"w-full"},Z=t("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Email Address",-1),ee={key:0,class:"block text-rose-500 mt-2"},te={class:"w-full"},se=t("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Phone Number",-1),le={key:0,class:"block text-rose-500 mt-2"},oe={class:"w-full"},ae=t("label",{for:"exampleInputEmail2",class:"block mb-2 text-gray-700"},"Bio",-1),re={key:0,class:"block text-rose-500 mt-2"},ne={class:"w-full"},ie={key:2,class:"w-full fixed flex items-center justify-center h-screen backdrop-grayscale-0 bg-black/30 top-0 left-0 p-8 md:p-0"},de={class:"w-96 relative bg-white overflow-hidden rounded-lg shadow-lg"},ce={class:"p-8 w-full"},ue=["src"],me=["src"],be={class:"w-full"},pe={class:"block w-full text-sm text-center py-2 text-sky-500 hover:bg-slate-100 cursor-pointer border-t border-b"},fe=k(" Upload Photo "),ge={key:0,class:"absolute top-0 left-0 w-full h-full flex items-center justify-center backdrop-grayscale-0 bg-white/30"},he=t("div",{class:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-green-500",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),ve=[he],xe={__name:"Edit",setup(ye){const n=R(),d=y([]),h=y(),f=y(!1),w=y(!1);T();const r=B({id:null,name:null,email:null,phone:null,bio:null}),v=()=>{w.value=w.value==!1},U=a=>new Promise((o,e)=>{var i=new FileReader;i.onload=()=>{o(i.result)},i.onerror=e,i.readAsDataURL(a)}),A=async a=>{let o=document.getElementById("avatar");const e=await U(a.target.files[0]);o.setAttribute("src",e);try{f.value=!0,await n.dispatch("uploadAvatar",a.target.files[0]),n.commit("SET_AUTH_USER",n.getters.user),v()}catch(i){console.log(i)}finally{f.value=!1}},E=async()=>{try{f.value=!0,await n.dispatch("removeAvatar"),n.commit("SET_AUTH_USER",n.getters.user),v()}catch(a){console.log(a)}finally{f.value=!1}},C=async()=>{const{name:a,email:o,phone:e,id:i,bio:L}=c.value;r.id=i,r.name=a,r.email=o,r.phone=e,r.bio=L},S=async()=>{d.value=[],h.value=null;try{const{id:a,name:o,phone:e,bio:i}=r;await n.dispatch("updateUser",{id:a,name:o,phone:e,bio:i}),n.commit("SET_AUTH_USER",n.getters.user),h.value="Your profile successfully updated"}catch(a){const o=a.response.data.errors;a.response.status===400&&(d.value=o),a.response.status>400&&(d.value=[...d.value,{message:o}])}};I(C);const c=V(()=>n.getters.authUser);return(a,o)=>(s(),l(p,null,[h.value?(s(),l("div",H,[M,k(" "+m(h.value),1)])):u("",!0),(s(!0),l(p,null,g(d.value,e=>(s(),l("div",null,[e.message?(s(),l("div",N,[z,k(" "+m(e.message),1)])):u("",!0)]))),256)),b(c)?(s(),l("div",P,[t("div",j,[t("div",D,[b(c).image?(s(),l("img",{key:0,src:b(c).image,class:"rounded-full w-16 h-16 border-2 border-sky-500",alt:"Avatar"},null,8,F)):(s(),l("img",{key:1,src:a.$defaultAvatar,class:"rounded-full w-16 h-16 border-2 border-sky-500",alt:"avatar"},null,8,$))]),t("div",G,[t("label",Y,m(b(c).name),1),b(c).provider?(s(),l("p",q,"Go to "+m(b(c).provider)+" account to change your avatar",1)):(s(),l("span",{key:1,onClick:v,class:"block text-sky-500 text-sm cursor-pointer hover:underline"},"Change profile image"))])]),t("div",J,[K,t("div",O,[Q,_(t("input",{type:"email","onUpdate:modelValue":o[0]||(o[0]=e=>r.name=e),class:"form-control w-full px-3 py-1.5 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none","aria-describedby":"emailHelp"},null,512),[[x,r.name]]),(s(!0),l(p,null,g(d.value,e=>(s(),l("div",null,[e.param=="name"?(s(),l("small",W,m(e.msg),1)):u("",!0)]))),256))]),t("div",X,[Z,_(t("input",{type:"email","onUpdate:modelValue":o[1]||(o[1]=e=>r.email=e),class:"form-control w-full px-3 py-1.5 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none","aria-describedby":"emailHelp",disabled:""},null,512),[[x,r.email]]),(s(!0),l(p,null,g(d.value,e=>(s(),l("div",null,[e.param=="email"?(s(),l("small",ee,m(e.msg),1)):u("",!0)]))),256))]),t("div",te,[se,_(t("input",{type:"tel","onUpdate:modelValue":o[2]||(o[2]=e=>r.phone=e),class:"form-control w-full px-3 py-1.5 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none","aria-describedby":"emailHelp"},null,512),[[x,r.phone]]),(s(!0),l(p,null,g(d.value,e=>(s(),l("div",null,[e.param=="phone"?(s(),l("small",le,m(e.msg),1)):u("",!0)]))),256))]),t("div",oe,[ae,_(t("textarea",{name:"bio","onUpdate:modelValue":o[3]||(o[3]=e=>r.bio=e),cols:"0",rows:"5",class:"form-control w-full px-3 py-1.5 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},null,512),[[x,r.bio]]),(s(!0),l(p,null,g(d.value,e=>(s(),l("div",null,[e.param=="bio"?(s(),l("small",re,m(e.msg),1)):u("",!0)]))),256))]),t("div",ne,[t("input",{onClick:o[4]||(o[4]=e=>S()),type:"submit",name:"submit",value:"Submit",class:"inline-block px-7 py-3 bg-blue-600 w-full lg:w-auto text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"})])])])):u("",!0),w.value?(s(),l("div",ie,[t("div",de,[t("div",ce,[b(c).image?(s(),l("img",{key:0,id:"avatar",src:b(c).image,class:"rounded-full border-2 border-sky-500 mx-auto w-24 h-24",alt:"Avatar"},null,8,ue)):(s(),l("img",{key:1,src:a.$defaultAvatar,id:"avatar",class:"rounded-full border-2 border-sky-500 mx-auto w-24 h-24",alt:"avatar"},null,8,me))]),t("div",be,[t("label",pe,[fe,t("input",{type:"file",onChange:o[5]||(o[5]=e=>A(e)),class:"hidden",name:"image"},null,32)]),t("span",{onClick:E,for:"",class:"block w-full text-sm text-center py-2 text-rose-500 hover:bg-slate-100 cursor-pointer border-b"}," Remove "),t("span",{onClick:v,class:"block w-full text-sm text-center py-2 hover:bg-slate-100 cursor-pointer"}," Cancel ")]),f.value?(s(),l("div",ge,ve)):u("",!0)])])):u("",!0)],64))}};export{xe as default};
