import{r as A,o as a,c,b as s,u as B,a as p,w as v,d as y,t as b,n as U,e as R,f as j,g as m,h as F,i as H,F as _,j as S,k as f,l as I,m as M,S as z}from"./index.36e94847.js";import{_ as E,S as T}from"./Spinner.7e67d292.js";import{h as D}from"./handleImage.61cb1b02.js";const O={ref:"item",class:"recipe-item"},P={class:"w-full flex items-center px-4 py-3"},q=["src"],G=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),J=[G],K={class:"aspect-video bg-skeleton"},Q=["src"],W={class:"flex items-center px-4 py-2"},X={__name:"Recipe",props:{recipe:Object},emits:["handleSaveRecipe"],setup(t,{emit:o}){const n=t,l=()=>{o("handleSaveRecipe",n.recipe._id)};return(h,r)=>{const i=A("router-link");return a(),c("div",O,[s("div",P,[s("img",{src:B(D)(t.recipe.user),class:"rounded-full w-6 h-6 border",alt:"Avatar"},null,8,q),p(i,{to:{name:"user",params:{id:t.recipe.user._id},force:!0},class:"ml-2 text-sm font-semibold text-gray-600 hover:underline"},{default:v(()=>[y(b(t.recipe.user.name),1)]),_:1},8,["to"]),t.recipe.isAuthUserRecipe?R("",!0):(a(),c("span",{key:0,onClick:r[0]||(r[0]=d=>l()),class:U(["ml-auto hover:text-sky-500",{"text-sky-500":t.recipe.isSaved}])},J,2))]),s("div",K,[s("img",{class:"aspect-video",src:t.recipe.image,alt:"recipe-image"},null,8,Q)]),s("div",W,[p(i,{to:{name:"recipe",params:{id:t.recipe._id}},class:"block text-sm tracking-wider text-gray-700 font-semibold mb-2 hover:text-sky-500"},{default:v(()=>[y(b(t.recipe.name),1)]),_:1},8,["to"])])],512)}}},Y={class:"wrapper-1 flex flex-col md:flex-row flex-wrap w-full gap-4 md:gap-8"},Z={__name:"ListRecipe",async setup(t){let o,n;const l=j(),h=I(),r=m([]),i=m(0),d=m(!1),g=m(0),{$perpage:x,$defaultRecipeImage:$,$baseUrl:C}=h.appContext.config.globalProperties,w=async(e=0)=>{try{await l.dispatch("getRecipes",e),r.value=[...r.value,...k.value],g.value=k.value.length}catch(u){console.log(u)}};let k=F(()=>l.getters.recipes.map(e=>{const u=l.getters.authUser._id;return e.isSaved=e.saved.includes(u),e.isAuthUserRecipe=u==e.user._id,e.image?e.image=C+e.image:e.image=$,e}));const V=async e=>{l.dispatch("saveRecipe",e)},L=async()=>{if(g.value<x)return d.value=!1;d.value=!0,i.value+=x,await w(i.value),d.value=!1};return[o,n]=H(()=>w()),await o,n(),(e,u)=>(a(),c(_,null,[s("div",Y,[(a(!0),c(_,null,S(r.value,N=>(a(),f(X,{recipe:N,onHandleSaveRecipe:V},null,8,["recipe"]))),256)),p(E,{onHandleLoadMoreRecipe:L})]),d.value?(a(),f(T,{key:0})):R("",!0)],64))}},ee={class:"flex flex-col md:flex-row flex-wrap w-full gap-4 md:gap-8"},te=M('<div class="w-full flex items-center px-4 py-2"><div class="rounded-full w-8 h-8 bg-skeleton" alt="Avatar"></div><div class="ml-2 w-32 p-3 bg-skeleton"></div><div class="w-4 h-4 bg-skeleton ml-auto"></div></div><div class="aspect-video bg-skeleton"></div><div class="w-full px-4 py-2"><div class="w-3/4 py-2 bg-skeleton"></div></div>',3),se=[te],ae={__name:"RecipeSkeleton",props:{count:0},setup(t){return(o,n)=>(a(),c("div",ee,[(a(!0),c(_,null,S(t.count,l=>(a(),c("div",{key:l,class:"recipe-item"},se))),128))]))}},le={ref:"recipeComponent",class:"relative flex flex-col lg:flex-row w-full"},ce={class:"mt-8"},oe={class:"mt-8"},de={__name:"Home",setup(t){return(o,n)=>(a(),f(z,null,{default:v(()=>[s("div",le,[s("div",ce,[p(Z)])],512)]),fallback:v(()=>[s("div",oe,[p(ae,{count:3})])]),_:1}))}};export{de as default};
